"use client";

import { motion } from "framer-motion";
import { useEffect, useState } from "react";

export default function LiquidMorph() {
  const [morphPath, setMorphPath] = useState(0);

  const paths = [
    "M 0,100 C 0,100 0,50 0,50 C 55.714285714285715,58.57142857142857 111.42857142857143,67.14285714285714 170,60 C 228.57142857142858,52.857142857142854 290,30 350,30 C 410,30 468.57142857142856,52.857142857142854 520,55 C 571.4285714285713,57.142857142857146 615.7142857142857,38.57142857142857 660,38.57142857142857 C 704.2857142857143,38.57142857142857 748.5714285714287,57.142857142857146 800,60 C 851.4285714285713,62.857142857142854 910,50 910,50 C 910,50 910,100 910,100 Z",
    "M 0,100 C 0,100 0,50 0,50 C 48.57142857142857,42.857142857142854 97.14285714285714,35.714285714285715 155,40 C 212.85714285714286,44.285714285714285 280,60 340,62.857142857142854 C 400,65.71428571428571 452.85714285714283,55.714285714285715 510,52.857142857142854 C 567.1428571428571,50 628.5714285714287,54.285714285714285 680,55 C 731.4285714285713,55.714285714285715 772.8571428571429,52.857142857142854 820,50 C 867.1428571428571,47.142857142857146 920,44.285714285714285 920,44.285714285714285 C 920,44.285714285714285 920,100 920,100 Z",
    "M 0,100 C 0,100 0,50 0,50 C 52.857142857142854,55.714285714285715 105.71428571428571,61.42857142857143 165,58.57142857142857 C 224.28571428571428,55.714285714285715 290,44.285714285714285 345,42.857142857142854 C 400,41.42857142857143 444.28571428571433,50 495,52.857142857142854 C 545.7142857142858,55.714285714285715 603.8571428571429,52.857142857142854 660,52.857142857142854 C 716.1428571428571,52.857142857142854 770.2857142857142,55.714285714285715 820,55 C 869.7142857142858,54.285714285714285 915,50 915,50 C 915,50 915,100 915,100 Z",
  ];

  useEffect(() => {
    const interval = setInterval(() => {
      setMorphPath((prev) => (prev + 1) % paths.length);
    }, 3000);
    return () => clearInterval(interval);
  }, []);

  return (
    <div className="absolute inset-0 overflow-hidden pointer-events-none opacity-30">
      <svg
        viewBox="0 0 910 100"
        className="absolute bottom-0 left-0 w-full h-full"
        preserveAspectRatio="none"
      >
        <motion.path
          d={paths[morphPath]}
          fill="url(#liquidGradient)"
          initial={false}
          animate={{ d: paths[morphPath] }}
          transition={{
            duration: 3,
            ease: "easeInOut",
          }}
        />
        <defs>
          <linearGradient id="liquidGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#F89938" stopOpacity="0.3" />
            <stop offset="50%" stopColor="#FFB366" stopOpacity="0.2" />
            <stop offset="100%" stopColor="#F89938" stopOpacity="0.1" />
          </linearGradient>
        </defs>
      </svg>
    </div>
  );
}
